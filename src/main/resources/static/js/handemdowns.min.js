function getUrlParam(e){for(var t=window.location.search.substring(1),o=t.split("&"),a=0;a<o.length;a++){var n=o[a].split("=");if(n[0]==e)return n[1]}}function updateUrlParam(e,t){var o=window.location.search.substring(1),a=o.indexOf("#"),n=-1===a?"":o.substr(a);o=-1===a?o:o.substr(0,a);var r=new RegExp("([?&])"+e+"=.*?(&|$)","i"),s=-1!==o.indexOf("?")?"&":"?";return t?o=o.match(r)?o.replace(r,"$1"+e+"="+t+"$2"):o+s+e+"="+t:(o=o.replace(new RegExp("([?&]?)"+e+"=[^&]*","i"),""),"?"===o.slice(-1)&&(o=o.slice(0,-1)),-1===o.indexOf("?")&&(o=o.replace(/&/,"?"))),o+n}function getGeoLocation(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){$.post("/set-location",{lat:t.coords.latitude,lon:t.coords.longitude},function(t){if("success"==t.status){var o=t.data;e(o)}}).fail(function(e){console.log(e)})},function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("User denied the request for GeoLocation.");break;case e.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case e.TIMEOUT:console.log("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:console.log("An unknown error occurred.")}}):console.log("GeoLocation is not supported by this browser.  Try updating your browser.")}function getLocationDisplayName(e){return null!=e.area?e.area:e.city}function ajaxLogin(e){var t=$("#username").val(),o=$("#password").val(),a=$("#login-error-message");$.ajax({url:"/login/submit",type:"POST",data:{username:t,password:o},dataType:"json",success:function(t){t.success?($("#login-modal").modal("toggle"),e()):(a.find("span:first").text("Unexpected Error: Unable to log in automatically."),a.show())},error:function(e){var t=e.responseText.split(": ").pop().replace("}","");a.find("span:first").text(t),a.show()}})}function validateSearch(){var e=!0,t=$("#topic"),o=$("#btn-search");return t.removeClass("error-outline"),o.removeClass("btn-danger"),t.val()||(t.addClass("error-outline"),o.addClass("btn-danger"),e=!1),e}function getCsrfHeader(){return $("meta[name='_csrf_header']").attr("content")}function getCsrfToken(){return $("meta[name='_csrf']").attr("content")}$.fn.exist=function(){return $(this).length>0},$(document).ajaxSend(function(e,t){t.setRequestHeader(getCsrfHeader(),getCsrfToken())}),$(document).ready(function(){$("#status").fadeOut(),$("#preloader").delay(100).fadeOut(),$("body").delay(100).css({overflow:"visible"}),$("#social-icons").exist()&&SocialShareKit.init(),$(".alert .close").click(function(e){e.preventDefault(),$(this).parent().hide()}),$("ul.nav li.nav-dropdown").click(function(){$(window).width()>768&&$(this).addClass("open")},function(){$(this).find("*").removeClass("open")}),$(".category-menu .category").click(function(e){e.preventDefault(),$(".category-menu").find('a[data-toggle="dropdown"]').text("Category: "+$(this).text()).append(" <span class='caret'></span>"),$("#category-search").val($(this).data("category-code")),$.post("/set-category",{category:$(this).data("category-code")})}),$(window).scroll(function(){$(this).scrollTop()>70?$(".back-top").fadeIn():$(".back-top").fadeOut()}),$("#login-action").click(function(e){e.preventDefault(),$("#login-modal").modal("toggle")})});
